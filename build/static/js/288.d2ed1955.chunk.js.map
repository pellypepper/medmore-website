{"version":3,"file":"static/js/288.d2ed1955.chunk.js","mappings":"sIAGA,MAQA,EARgBA,KAERC,EAAAA,EAAAA,KAAA,SAAOC,UAAU,oBAAmBC,UAChCF,EAAAA,EAAAA,KAAA,OAAKC,UAAU,a,uGCC3B,MAkdA,EAlduBE,KACnB,MAAOC,EAAQC,IAAaC,EAAAA,EAAAA,UAAS,KAC9BC,EAAcC,IAAmBF,EAAAA,EAAAA,UAAS,KAC1CG,EAAUC,IAAeJ,EAAAA,EAAAA,UAAS,KAClCK,EAAWC,IAAgBN,EAAAA,EAAAA,UAAS,CAAEO,YAAa,EAAGC,MAAO,EAAGC,YAAa,KAC7EC,EAASC,IAAcX,EAAAA,EAAAA,WAAS,IAChCY,EAAYC,IAAiBb,EAAAA,EAAAA,UAAS,cACtCc,EAAaC,IAAkBf,EAAAA,EAAAA,UAAS,CAAEgB,GAAI,GAAIC,KAAM,GAAIC,MAAO,GAAIC,MAAO,QAC9EC,EAAWC,IAAgBrB,EAAAA,EAAAA,WAAS,GACrCsB,GAAWC,EAAAA,EAAAA,QAAO,OACjBC,EAASC,IAAczB,EAAAA,EAAAA,WAAS,GACjC0B,GAAWC,EAAAA,EAAAA,OACVC,EAAiBC,IAAsB7B,EAAAA,EAAAA,WAAS,IA2BvD8B,EAAAA,EAAAA,YAAU,KACYC,WACd,IACIpB,GAAW,GACX,MAAMqB,QAAyBC,MAAM,8CAC/BC,QAAqBF,EAAiBG,OAEtCC,QAAsBH,MAAM,2CAC5B5B,QAAkB+B,EAAcD,OAEhCE,QAAuBJ,MAAM,4CAC7BK,QAAmBD,EAAeF,OACxCI,QAAQC,IAAI,kBAAmBF,GAE/BlC,EAAY8B,GACZ5B,EAAaD,GACbN,EAAUuC,EACd,CAAE,MAAOG,GACLF,QAAQG,MAAM,uBAAwBD,EAC1C,CAAC,QACG9B,GAAW,EACf,GAGJgC,EAAW,GACZ,KAEHb,EAAAA,EAAAA,YAAU,KAKN,GAJIR,EAASsB,SACTtB,EAASsB,QAAQC,UAGjBxC,EAAUE,YAAc,GAAoB,cAAfK,EAA4B,CACzD,MAAMkC,EAAMC,SAASC,eAAe,cAAcC,WAAW,MAC7D3B,EAASsB,QAAU,IAAIM,EAAAA,GAAMJ,EAAK,CAC9BK,KAAM,OACNC,KAAM,CACFC,OAAQ,CAAC,MAAO,MAAO,MAAO,MAAO,OACrCC,SAAU,CACN,CACIC,MAAO,YACPH,KAAM,CAAC,KAAM,KAAM,IAAM,IAAM,MAC/BI,YAAa,wBACbC,gBAAiB,0BACjBC,QAAS,MAIrBC,QAAS,CACLC,YAAY,EACZC,QAAS,CACLC,OAAQ,CAAEC,SAAU,UAIpC,CAEA,MAAO,KACCzC,EAASsB,SACTtB,EAASsB,QAAQC,SACrB,CACH,GACF,CAACxC,EAAWO,IAIf,MAAMoD,EAAqBC,IACvB,MAAM,KAAEhD,EAAI,MAAEiD,GAAUD,EAAEE,OAC1BpD,EAAe,IAAKD,EAAa,CAACG,GAAOiD,GAAQ,EAkF/CE,EAAqBC,IACvBtD,EAAe,CAAEC,GAAIqD,EAAQrD,GAAIC,KAAMoD,EAAQpD,KAAMC,MAAOmD,EAAQnD,MAAOC,MAAO,OAClFE,GAAa,EAAK,EAoFhBiD,EAZmBnE,EAASoE,KAAIF,IAC9B,MAAMG,EAAa1E,EAAO2E,QAAO,CAACC,EAAKC,IAC/BA,EAAMC,aAAeP,EAAQrD,GACtB0D,EAAMC,EAAME,OAEhBH,GACR,GACH,MAAO,IAAKL,EAASG,aAAY,IAEjBM,MAAK,CAACC,EAAGC,IAAMA,EAAER,WAAaO,EAAEP,aAAYS,MAAM,EAAG,GAYvEC,EANKpF,EAAO2E,QAAO,CAACC,EAAKC,KACvBD,EAAIC,EAAMQ,iBAAmBT,EAAIC,EAAMQ,iBAAmB,GAAK,EACxDT,IACR,CAAC,GAiBR,OAZA5C,EAAAA,EAAAA,YAAU,KACN,GAAI7B,EAAc,CACd,MAAMmF,EAAQC,YAAW,KACrB5D,GAAW,EAAK,GACjB,KAEH,MAAO,IAAM6D,aAAaF,EAC9B,CACI3D,GAAW,EACf,GACD,CAACxB,IAEAS,GAAgBhB,EAAAA,EAAAA,KAACD,EAAAA,EAAO,KAIxB8F,EAAAA,EAAAA,MAAA,OAAK5F,UAAU,kBAAiBC,SAAA,EAC5B2F,EAAAA,EAAAA,MAAA,SAAO5F,UAAU,UAASC,SAAA,EACtBF,EAAAA,EAAAA,KAAA,MAAAE,SAAI,qBACJ2F,EAAAA,EAAAA,MAAA,MAAA3F,SAAA,EACIF,EAAAA,EAAAA,KAAA,MAAI8F,QAASA,IAAM3E,EAAc,aAAclB,UAA0B,cAAfiB,EAA6B,SAAW,GAAGhB,SAAC,eACtGF,EAAAA,EAAAA,KAAA,MAAI8F,QAASA,IAAM3E,EAAc,YAAalB,UAA0B,aAAfiB,EAA4B,SAAW,GAAGhB,SAAC,cACpGF,EAAAA,EAAAA,KAAA,MAAI8F,QAASA,IAAM3E,EAAc,UAAWlB,UAA0B,WAAfiB,EAA0B,SAAW,GAAGhB,SAAC,YAChGF,EAAAA,EAAAA,KAAA,MAAI8F,QAtSCzD,UACjB,IACI,MAAM0D,QAAiBxD,MAAM,2CAA2C,CACpEyD,OAAQ,OACRC,QAAS,CACL,eAAgB,oBAEpBC,YAAa,YAGjB,IAAKH,EAASI,GACV,MAAM,IAAIC,MAAM,qBAGpB,MAAM1C,QAAaqC,EAAStD,OAC5BI,QAAQC,IAAIY,EAAK2C,SACjBrE,EAAS,IACb,CAAE,MAAOgB,GACLH,QAAQG,MAAM,gBAAiBA,GAC/BsD,MAAM,wCACR9F,EAAgB,uCAClB,GAiRuCP,UAAU,gBAAeC,SAAC,kBAI7D2F,EAAAA,EAAAA,MAAA,QAAM5F,UAAU,oBAAmBC,SAAA,CACf,cAAfgB,IACG2E,EAAAA,EAAAA,MAAAU,EAAAA,SAAA,CAAArG,SAAA,EACI2F,EAAAA,EAAAA,MAAA,WAAS5F,UAAU,YAAWC,SAAA,EAC1BF,EAAAA,EAAAA,KAAA,MAAIC,UAAU,mBAAkBC,SAAC,wBACjC2F,EAAAA,EAAAA,MAAA,OAAK5F,UAAU,uBAAsBC,SAAA,EACjC2F,EAAAA,EAAAA,MAAA,OAAK5F,UAAU,iBAAgBC,SAAA,EAC3BF,EAAAA,EAAAA,KAAA,MAAAE,SAAI,mBACJ2F,EAAAA,EAAAA,MAAA,KAAA3F,SAAA,CAAG,OAAES,EAAUG,aAEnB+E,EAAAA,EAAAA,MAAA,OAAK5F,UAAU,iBAAgBC,SAAA,EAC3BF,EAAAA,EAAAA,KAAA,MAAAE,SAAI,kBACJF,EAAAA,EAAAA,KAAA,KAAAE,SAAIS,EAAUE,kBAElBgF,EAAAA,EAAAA,MAAA,OAAK5F,UAAU,iBAAgBC,SAAA,EAC3BF,EAAAA,EAAAA,KAAA,MAAAE,SAAI,qBACJF,EAAAA,EAAAA,KAAA,KAAAE,SAAIS,EAAUI,qBAGtB8E,EAAAA,EAAAA,MAAA,OAAK5F,UAAU,gBAAeC,SAAA,EAC1BF,EAAAA,EAAAA,KAAA,MAAAE,SAAI,6BACJF,EAAAA,EAAAA,KAAA,MAAAE,SACKsG,OAAOC,QAAQjB,GAAcX,KAAI6B,IAAA,IAAEC,EAAQC,GAAMF,EAAA,OAC9Cb,EAAAA,EAAAA,MAAA,MAAA3F,SAAA,CAAkByG,EAAO,KAAGC,IAAnBD,EAA8B,aAMvDd,EAAAA,EAAAA,MAAA,WAAS5F,UAAU,QAAOC,SAAA,EACtBF,EAAAA,EAAAA,KAAA,MAAAE,SAAI,kBACJF,EAAAA,EAAAA,KAAA,UAAQsB,GAAG,aAAauF,MAAM,MAAMC,OAAO,YAG/CjB,EAAAA,EAAAA,MAAA,WAAS5F,UAAU,eAAcC,SAAA,EAC7BF,EAAAA,EAAAA,KAAA,MAAAE,SAAI,0BACJF,EAAAA,EAAAA,KAAA,OAAKC,UAAU,oBAAmBC,SAC7B0E,EAAmBC,KAAIF,IACpBkB,EAAAA,EAAAA,MAAA,OAAK5F,UAAU,mBAAkBC,SAAA,EAC7BF,EAAAA,EAAAA,KAAA,MAAAE,SAAKyE,EAAQpD,QACbsE,EAAAA,EAAAA,MAAA,KAAG5F,UAAU,gBAAeC,SAAA,CAAC,cAASyE,EAAQnD,UAC9CqE,EAAAA,EAAAA,MAAA,KAAG5F,UAAU,cAAaC,SAAA,CAAC,gBAAcyE,EAAQG,eACjDe,EAAAA,EAAAA,MAAA,OAAK5F,UAAU,UAASC,SAAA,EACpBF,EAAAA,EAAAA,KAAA,UAAQC,UAAU,cAAaC,SAAC,UAChCF,EAAAA,EAAAA,KAAA,UAAQC,UAAU,cAAc6F,QAASA,IAAMpB,EAAkBC,GAASzE,SAAC,cAN5CyE,EAAQrD,cAenD,aAAfJ,IACG2E,EAAAA,EAAAA,MAAA,WAAS5F,UAAU,WAAUC,SAAA,EACzBF,EAAAA,EAAAA,KAAA,MAAAE,SAAI,kBACJ2F,EAAAA,EAAAA,MAAA,QAAMkB,SAAUrF,EA/KRW,UACxBkC,EAAEyC,iBACF7E,GAAmB,GACnB,MAAM8E,EAAW,IAAIC,SACrBD,EAASE,OAAO,OAAQ/F,EAAYG,MACpC0F,EAASE,OAAO,QAAS/F,EAAYI,OACjCJ,EAAYK,OACZwF,EAASE,OAAO,QAAS/F,EAAYK,OAEzCoB,QAAQC,IAAI,aAAcmE,GAE1B,IAAK,MAAOG,EAAK5C,KAAUyC,EAASR,UAChC5D,QAAQC,IAAI,GAAGsE,KAAQ5C,GAG3B,IACI,MAAMuB,QAAiBsB,EAAAA,EAAMC,IACzB,8CAA6ClG,EAAYE,KACzD2F,EACA,CACIhB,QAAS,CACL,eAAgB,yBAO5B,GAAwB,MAApBF,EAASY,OACT,MAAM,IAAIP,MAAM,4BAKpB,MAAMmB,EAAiBxB,EAASrC,KAEhChD,GAAa8G,GACTA,EAAa3C,KAAKF,GACdA,EAAQrD,KAAOiG,EAAejG,GAAKiG,EAAiB5C,MAI5DtD,EAAe,CAAEC,GAAI,GAAIC,KAAM,GAAIC,MAAO,GAAIC,MAAO,OACrDE,GAAa,GACbnB,EAAgB,gCACpB,CAAE,MAAOwC,GACLH,QAAQG,MAAM,0BAA2BA,EAC7C,CAAC,QACGb,GAAmB,EACvB,GAzHqBE,UAIrB,GAHAkC,EAAEyC,iBACF7E,GAAmB,IAEdf,EAAYG,OAASH,EAAYI,MAElC,YADA8E,MAAM,uCAIV,IAAKlF,EAAYK,MAEb,YADA6E,MAAM,0BAYV,MAAMW,EAAW,IAAIC,SACrBD,EAASE,OAAO,QAAS/F,EAAYK,OACrCwF,EAASE,OAAO,OAAQ/F,EAAYG,MACpC0F,EAASE,OAAO,QAAS/F,EAAYI,OAIrC,IAGI,MAAMuE,QAAiBsB,EAAAA,EAAMI,KACzB,6CACAR,EACA,CACIhB,QAAS,CAEL,eAAgB,yBAM5BpD,QAAQC,IAAI,qBAAsBiD,EAASrC,MAI3ChD,GAAa8G,GAAiB,IAAIA,EAAczB,EAASrC,QAGzDrC,EAAe,CAAEC,GAAI,GAAIC,KAAM,GAAIC,MAAO,GAAIC,MAAO,OAErDjB,EAAgB,8BAIpB,CAAE,MAAOwC,GACLH,QAAQC,IAAIE,EAAMqD,SAClBxD,QAAQG,MAAM,kBAAmBA,EAAM+C,SAAW/C,EAAM+C,SAASrC,KAAOV,EAAMqD,SAC9EC,QACA9F,EAAgB,0BAA0BwC,EAAM+C,SAAW/C,EAAM+C,SAASrC,KAAKV,MAAQA,EAAMqD,UACjG,CAAC,QACGlE,GAAmB,EACvB,GAuLmFjC,SAAA,EAC/DF,EAAAA,EAAAA,KAAA,SACIyD,KAAK,OACLlC,KAAK,OACLmG,YAAY,eACZlD,MAAOpD,EAAYG,KACnBoG,SAAUrD,EACVsD,UAAQ,KAEZ5H,EAAAA,EAAAA,KAAA,SACIyD,KAAK,SACLlC,KAAK,QACLmG,YAAY,gBACZlD,MAAOpD,EAAYI,MACnBmG,SAAUrD,EACVsD,UAAQ,KAGZ5H,EAAAA,EAAAA,KAAA,SACIyD,KAAK,OACLlC,KAAK,QAELmG,YAAY,gBACZG,OAAO,UACPF,SA3RFpD,IACtB,MAAMuD,EAAOvD,EAAEE,OAAOsD,MAAM,GAC5BlF,QAAQC,IAAI,iBAAkBgF,GAE1BA,GACAzG,GAAe2G,IAAS,IACjBA,EACHvG,MAAOqG,KAEf,EAmRwBF,UAAWlG,KAEf1B,EAAAA,EAAAA,KAAA,UAAQyD,KAAK,SAAQvD,SAAEwB,EAAY,iBAAmB,gBACrDA,IACG1B,EAAAA,EAAAA,KAAA,UAAQyD,KAAK,SAASqC,QAASA,KAAQzE,EAAe,CAAEC,GAAI,GAAIC,KAAM,GAAIC,MAAO,GAAIyG,IAAK,OAAStG,GAAa,EAAM,EAAIzB,SAAC,cAGjIgC,IAAmBlC,EAAAA,EAAAA,KAACD,EAAAA,EAAO,KAC7BC,EAAAA,EAAAA,KAAA,OAAKC,UAAU,gBAAeC,SAEzBO,EAASoE,KAAKF,IACXkB,EAAAA,EAAAA,MAAA,OAAsB5F,UAAU,eAAcC,SAAA,EAC1CF,EAAAA,EAAAA,KAAA,OAAKgB,QAAQ,OAAOkH,IAAKvD,EAAQsD,IAAKE,IAAKxD,EAAQpD,QACnDvB,EAAAA,EAAAA,KAAA,MAAAE,SAAKyE,EAAQpD,QACbsE,EAAAA,EAAAA,MAAA,KAAA3F,SAAA,CAAG,cAASyE,EAAQnD,UACpBqE,EAAAA,EAAAA,MAAA,OAAK5F,UAAU,UAASC,SAAA,EACpBF,EAAAA,EAAAA,KAAA,UAAQ8F,QAASA,IAAMpB,EAAkBC,GAASzE,SAAC,UACnDF,EAAAA,EAAAA,KAAA,UAAQ8F,QAASA,IArKzBzD,WACxB,IAKI,WAJuBE,MAAM,8CAA6CjB,IAAM,CAC5E0E,OAAQ,YAGEG,GACV,MAAM,IAAIC,MAAM,4BAGpB1F,GAAa8G,GAAiBA,EAAaY,QAAQzD,GAAYA,EAAQrD,KAAOA,KAClF,CAAE,MAAO0B,GACLH,QAAQG,MAAM,0BAA2BA,EAC7C,GAwJuDqF,CAAoB1D,EAAQrD,IAAIpB,SAAC,gBANtDyE,EAAQrD,WAclB,WAAfJ,IACG2E,EAAAA,EAAAA,MAAA,WAAS5F,UAAU,SAAQC,SAAA,EACvBF,EAAAA,EAAAA,KAAA,MAAAE,SAAI,eACHE,EAAOkI,OAAS,GACbzC,EAAAA,EAAAA,MAAA,SAAO5F,UAAU,eAAcC,SAAA,EAC3BF,EAAAA,EAAAA,KAAA,SAAAE,UACI2F,EAAAA,EAAAA,MAAA,MAAA3F,SAAA,EACIF,EAAAA,EAAAA,KAAA,MAAAE,SAAI,cACJF,EAAAA,EAAAA,KAAA,MAAAE,SAAI,YACJF,EAAAA,EAAAA,KAAA,MAAAE,SAAI,cACJF,EAAAA,EAAAA,KAAA,MAAAE,SAAI,WACJF,EAAAA,EAAAA,KAAA,MAAAE,SAAI,aACJF,EAAAA,EAAAA,KAAA,MAAAE,SAAI,oBACJF,EAAAA,EAAAA,KAAA,MAAAE,SAAI,gBACJF,EAAAA,EAAAA,KAAA,MAAAE,SAAI,qBAGZF,EAAAA,EAAAA,KAAA,SAAAE,SACKE,EAAOyE,KAAKI,IACTY,EAAAA,EAAAA,MAAA,MAAA3F,SAAA,EACIF,EAAAA,EAAAA,KAAA,MAAAE,SAAK+E,EAAM3D,MACXuE,EAAAA,EAAAA,MAAA,MAAA3F,SAAA,CAAI,OAAE+E,EAAME,WACZnF,EAAAA,EAAAA,KAAA,MAAAE,SAAK+E,EAAMsD,YACXvI,EAAAA,EAAAA,KAAA,MAAAE,SAAK+E,EAAMuD,SACXxI,EAAAA,EAAAA,KAAA,MAAAE,SAAK+E,EAAMwD,WACXzI,EAAAA,EAAAA,KAAA,MAAAE,SAAK+E,EAAMQ,kBACXzF,EAAAA,EAAAA,KAAA,MAAAE,SAAK,IAAIwI,KAAKzD,EAAM0D,YAAYC,oBAChC5I,EAAAA,EAAAA,KAAA,MAAAE,SAAK,IAAIwI,KAAKzD,EAAM4D,YAAYD,qBAR3B3D,EAAM3D,YAc3BtB,EAAAA,EAAAA,KAAA,KAAAE,SAAG,4BAIZK,IACCP,EAAAA,EAAAA,KAAA,OAAKC,UAAW,gBAAe6B,EAAU,mBAAqB,IAAK5B,SAC9DK,SAIX,C","sources":["component/spinner.js","pages/adminDashboard/admin.js"],"sourcesContent":["import React from \"react\";\r\nimport \"./spinner.css\"; \r\n\r\nconst Spinner = () => {\r\n    return (\r\n        <aside className=\"spinner-container\">\r\n            <div className=\"spinner\"></div>\r\n        </aside>\r\n    );\r\n};\r\n\r\nexport default Spinner;\r\n","import React, { useEffect, useState, useRef } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport Chart from 'chart.js/auto';\r\nimport Spinner from '../../component/spinner'; \r\nimport axios from 'axios';\r\nimport './admin.css';\r\n\r\nconst AdminDashboard = () => {\r\n    const [orders, setOrders] = useState([]);\r\n    const [alertMessage, setAlertMessage] = useState(\"\");\r\n    const [products, setProducts] = useState([]);\r\n    const [salesData, setSalesData] = useState({ sales_count: 0, total: 0, total_buyer: 0 });\r\n    const [loading, setLoading] = useState(false);\r\n    const [activeMenu, setActiveMenu] = useState('Dashboard'); \r\n    const [productForm, setProductForm] = useState({ id: '', name: '', price: '', image: null }); // Change img to null\r\n    const [isEditing, setIsEditing] = useState(false);\r\n    const chartRef = useRef(null); \r\n    const [fadeOut, setFadeOut] = useState(false);\r\n    const navigate = useNavigate();\r\n    const [isAddingProduct, setIsAddingProduct] = useState(false); // New state for spinner\r\n\r\n\r\n    const handleLogout = async () => {\r\n        try {\r\n            const response = await fetch(`${process.env.REACT_APP_API_URL}/logout`, {\r\n                method: 'POST',\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                },\r\n                credentials: 'include', \r\n            });\r\n    \r\n            if (!response.ok) {\r\n                throw new Error('Failed to log out');\r\n            }\r\n    \r\n            const data = await response.json();\r\n            console.log(data.message); \r\n            navigate('/'); \r\n        } catch (error) {\r\n            console.error('Logout error:', error);\r\n            alert('Failed to log out. Please try again.');  \r\n          setAlertMessage('Failed to log out. Please try again.');\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        const fetchData = async () => {\r\n            try {\r\n                setLoading(true);\r\n                const productsResponse = await fetch(`${process.env.REACT_APP_API_URL}/products`);\r\n                const productsData = await productsResponse.json();\r\n\r\n                const salesResponse = await fetch(`${process.env.REACT_APP_API_URL}/sales`);\r\n                const salesData = await salesResponse.json();\r\n\r\n                const ordersResponse = await fetch(`${process.env.REACT_APP_API_URL}/orders`);\r\n                const ordersData = await ordersResponse.json();\r\n                console.log('Fetched orders:', ordersData);\r\n\r\n                setProducts(productsData);\r\n                setSalesData(salesData);\r\n                setOrders(ordersData);\r\n            } catch (err) {\r\n                console.error('Failed to fetch data', err);\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        };\r\n\r\n        fetchData();\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        if (chartRef.current) {\r\n            chartRef.current.destroy();\r\n        }\r\n\r\n        if (salesData.sales_count > 0 && activeMenu === 'Dashboard') {\r\n            const ctx = document.getElementById('salesChart').getContext('2d');\r\n            chartRef.current = new Chart(ctx, {\r\n                type: 'line',\r\n                data: {\r\n                    labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May'], \r\n                    datasets: [\r\n                        {\r\n                            label: 'Sales ($)',\r\n                            data: [1200, 1900, 3000, 5000, 2400], \r\n                            borderColor: 'rgba(75, 192, 192, 1)',\r\n                            backgroundColor: 'rgba(75, 192, 192, 0.2)',\r\n                            tension: 0.4,\r\n                        },\r\n                    ],\r\n                },\r\n                options: {\r\n                    responsive: true,\r\n                    plugins: {\r\n                        legend: { position: 'top' },\r\n                    },\r\n                },\r\n            });\r\n        }\r\n\r\n        return () => {\r\n            if (chartRef.current) {\r\n                chartRef.current.destroy();\r\n            }\r\n        };\r\n    }, [salesData, activeMenu]);\r\n\r\n\r\n\r\n    const handleInputChange = (e) => {\r\n        const { name, value } = e.target;\r\n        setProductForm({ ...productForm, [name]: value });\r\n    };\r\n\r\n    const handleFileChange = (e) => {\r\n        const file = e.target.files[0];\r\n        console.log('Selected File:', file);\r\n        \r\n        if (file) {\r\n            setProductForm(prevState => ({\r\n                ...prevState,\r\n                image: file // Directly set the File object\r\n            }));\r\n        }\r\n    };\r\n    \r\n    const handleAddProduct = async (e) => {\r\n        e.preventDefault();\r\n        setIsAddingProduct(true);\r\n        // Validation\r\n        if (!productForm.name || !productForm.price) {\r\n            alert('Please enter product name and price');\r\n            return;\r\n        }\r\n    \r\n        if (!productForm.image) {\r\n            alert('Please select an image');\r\n            return;\r\n        }\r\n    \r\n        // const formData = new FormData();\r\n     \r\n        // formData.append('image', productForm.image);\r\n        // console.log('Form Data:', formData);\r\n        \r\n        // for (const [key, value] of formData.entries()) {\r\n        //     console.log(`${key}:`, value);\r\n        // }\r\n        const formData = new FormData();\r\n        formData.append('image', productForm.image);\r\n        formData.append('name', productForm.name);\r\n        formData.append('price', productForm.price);\r\n        \r\n\r\n    \r\n        try {\r\n\r\n       \r\n            const response = await axios.post(\r\n                `${process.env.REACT_APP_API_URL}/products`, \r\n                formData, \r\n                {\r\n                    headers: {\r\n            \r\n                        'Content-Type': 'multipart/form-data',\r\n                    }\r\n                }\r\n            );\r\n    \r\n            // Correct way to handle axios response\r\n            console.log('New Product Added:', response.data);\r\n           \r\n          \r\n            // Update products list\r\n            setProducts((prevProducts) => [...prevProducts, response.data]);\r\n            \r\n            // Reset form\r\n            setProductForm({ id: '', name: '', price: '', image: null });\r\n            \r\n            setAlertMessage('Product added successfully!');\r\n\r\n         \r\n    \r\n        } catch (error) {\r\n            console.log(error.message);\r\n            console.error('Complete Error:', error.response ? error.response.data : error.message);\r\n            alert();\r\n            setAlertMessage(`Failed to add product: ${error.response ? error.response.data.error : error.message}`);\r\n        } finally {\r\n            setIsAddingProduct(false);\r\n        }   \r\n    };\r\n    \r\n    const handleEditProduct = (product) => {\r\n        setProductForm({ id: product.id, name: product.name, price: product.price, image: null });\r\n        setIsEditing(true);\r\n    };\r\n\r\n    const handleUpdateProduct = async (e) => {\r\n        e.preventDefault();\r\n        setIsAddingProduct(true);\r\n        const formData = new FormData();\r\n        formData.append('name', productForm.name);\r\n        formData.append('price', productForm.price);\r\n        if (productForm.image) {\r\n            formData.append('image', productForm.image);\r\n        }\r\n        console.log('Form Data:', formData);\r\n        \r\n        for (const [key, value] of formData.entries()) {\r\n            console.log(`${key}:`, value);\r\n        }\r\n    \r\n        try {\r\n            const response = await axios.put(\r\n                `${process.env.REACT_APP_API_URL}/products/${productForm.id}`, \r\n                formData, \r\n                {\r\n                    headers: {\r\n                        'Content-Type': 'multipart/form-data',\r\n                    }\r\n                }\r\n            );\r\n    \r\n            // Error: response.ok doesn't exist on axios response\r\n            // Instead, check response status\r\n            if (response.status !== 200) {\r\n                throw new Error('Failed to update product');\r\n            }\r\n    \r\n            // Error: response.json() doesn't exist on axios\r\n            // Use response.data instead\r\n            const updatedProduct = response.data;\r\n    \r\n            setProducts((prevProducts) =>\r\n                prevProducts.map((product) =>\r\n                    product.id === updatedProduct.id ? updatedProduct : product\r\n                )\r\n            );\r\n    \r\n            setProductForm({ id: '', name: '', price: '', image: null });\r\n            setIsEditing(false);\r\n            setAlertMessage('Product Updated successfully!');\r\n        } catch (error) {\r\n            console.error('Error updating product:', error);\r\n        } finally {\r\n            setIsAddingProduct(false);\r\n        }   \r\n    };\r\n\r\n    const handleDeleteProduct = async (id) => {\r\n        try {\r\n            const response = await fetch(`${process.env.REACT_APP_API_URL}/products/${id}`, {\r\n                method: 'DELETE',\r\n            });\r\n\r\n            if (!response.ok) {\r\n                throw new Error('Failed to delete product');\r\n            }\r\n\r\n            setProducts((prevProducts) => prevProducts.filter((product) => product.id !== id));\r\n        } catch (error) {\r\n            console.error('Error deleting product:', error);\r\n        }\r\n    };\r\n\r\n    const getTopSellingProducts = () => {\r\n        const productSales = products.map(product => {\r\n            const totalSales = orders.reduce((acc, order) => {\r\n                if (order.product_id === product.id) {\r\n                    return acc + order.amount;\r\n                }\r\n                return acc;\r\n            }, 0);\r\n            return { ...product, totalSales };\r\n        });\r\n        return productSales.sort((a, b) => b.totalSales - a.totalSales).slice(0, 5);\r\n    };\r\n\r\n    const topSellingProducts = getTopSellingProducts();\r\n\r\n    const getOrderSummary = () => {\r\n        return orders.reduce((acc, order) => {\r\n            acc[order.payment_status] = (acc[order.payment_status] || 0) + 1;\r\n            return acc;\r\n        }, {});\r\n    };\r\n\r\n    const orderSummary = getOrderSummary();\r\n\r\n    useEffect(() => {\r\n        if (alertMessage) {\r\n            const timer = setTimeout(() => {\r\n                setFadeOut(true);\r\n            }, 5000);\r\n\r\n            return () => clearTimeout(timer);\r\n        } else {\r\n            setFadeOut(false);\r\n        }\r\n    }, [alertMessage]);\r\n\r\n    if (loading) return <Spinner />;\r\n\r\n\r\n    return (\r\n        <div className=\"admin-dashboard\">\r\n            <aside className=\"sidebar\">\r\n                <h2>Admin Dashboard</h2>\r\n                <ul>\r\n                    <li onClick={() => setActiveMenu('Dashboard')} className={activeMenu === 'Dashboard' ? 'active' : ''}>Dashboard</li>\r\n                    <li onClick={() => setActiveMenu('Products')} className={activeMenu === 'Products' ? 'active' : ''}>Products</li>\r\n                    <li onClick={() => setActiveMenu('Orders')} className={activeMenu === 'Orders' ? 'active' : ''}>Orders</li>\r\n                    <li onClick={handleLogout} className=\"logout-button\">Logout</li> \r\n                </ul>\r\n            </aside>\r\n\r\n            <main className=\"dashboard-content\">\r\n                {activeMenu === 'Dashboard' && (\r\n                    <>\r\n                        <section className=\"analytics\">\r\n                            <h3 className='text-center my-3'>Analytics Overview</h3>\r\n                            <div className=\"analytics-cards mt-2\">\r\n                                <div className=\"analytics-card\">\r\n                                    <h4>Total Revenue</h4>\r\n                                    <p>£{salesData.total}</p>\r\n                                </div>\r\n                                <div className=\"analytics-card\">\r\n                                    <h4>Total Orders</h4>\r\n                                    <p>{salesData.sales_count}</p>\r\n                                </div>\r\n                                <div className=\"analytics-card\">\r\n                                    <h4>Total Customers</h4>\r\n                                    <p>{salesData.total_buyer}</p>\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"order-summary\">\r\n                                <h4>Order Summary by Status</h4>\r\n                                <ul>\r\n                                    {Object.entries(orderSummary).map(([status, count]) => (\r\n                                        <li key={status}>{status}: {count}</li>\r\n                                    ))}\r\n                                </ul>\r\n                            </div>\r\n                        </section>\r\n\r\n                        <section className=\"chart\">\r\n                            <h3>Sales Report</h3>\r\n                            <canvas id=\"salesChart\" width=\"400\" height=\"200\"></canvas>\r\n                        </section>\r\n\r\n                        <section className=\"top-products\">\r\n                            <h3>Top Selling Products</h3>\r\n                            <div className=\"top-products-grid\">\r\n                                {topSellingProducts.map(product => (\r\n                                    <div className=\"top-product-card\" key={product.id}>\r\n                                        <h4>{product.name}</h4>\r\n                                        <p className=\"product-price\">Price: £{product.price}</p>\r\n                                        <p className=\"total-sales\">Total Sales: {product.totalSales}</p>\r\n                                        <div className=\"actions\">\r\n                                            <button className=\"view-button\">View</button>\r\n                                            <button className=\"edit-button\" onClick={() => handleEditProduct(product)}>Edit</button>\r\n                                        </div>\r\n                                    </div>\r\n                                ))}\r\n                            </div>\r\n                        </section>\r\n                    </>\r\n                )}\r\n\r\n                {activeMenu === 'Products' && (\r\n                    <section className=\"products\">\r\n                        <h3>Product List</h3>\r\n                        <form onSubmit={isEditing ? handleUpdateProduct : handleAddProduct}>\r\n                            <input\r\n                                type=\"text\"\r\n                                name=\"name\"\r\n                                placeholder=\"Product Name\"\r\n                                value={productForm.name}\r\n                                onChange={handleInputChange}\r\n                                required\r\n                            />\r\n                            <input\r\n                                type=\"number\"\r\n                                name=\"price\"\r\n                                placeholder=\"Product Price\"\r\n                                value={productForm.price}\r\n                                onChange={handleInputChange}\r\n                                required\r\n                            />\r\n\r\n                            <input\r\n                                type=\"file\" // Change to file input\r\n                                name=\"image\"\r\n        \r\n                                placeholder=\"Product Image\"\r\n                                accept=\"image/*\" // Accept image files\r\n                                onChange={handleFileChange} // Handle file change\r\n                                required={!isEditing} // Make required only if not editing\r\n                            />\r\n                            <button type=\"submit\">{isEditing ? 'Update Product' : 'Add Product'}</button>\r\n                            {isEditing && (\r\n                                <button type=\"button\" onClick={() => { setProductForm({ id: '', name: '', price: '', img: null }); setIsEditing(false); }}>Cancel</button>\r\n                            )}\r\n                        </form>\r\n                         {isAddingProduct && <Spinner />}\r\n                        <div className=\"products-grid\">\r\n                     \r\n                            {products.map((product) => (\r\n                                <div key={product.id} className=\"product-card\">\r\n                                    <img loading=\"lazy\" src={product.img} alt={product.name} />\r\n                                    <h4>{product.name}</h4>\r\n                                    <p>Price: £{product.price}</p>\r\n                                    <div className=\"actions\">\r\n                                        <button onClick={() => handleEditProduct(product)}>Edit</button>\r\n                                        <button onClick={() => handleDeleteProduct(product.id)}>Delete</button>\r\n                                    </div>\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                    </section>\r\n                )}\r\n\r\n                {activeMenu === 'Orders' && (\r\n                    <section className=\"orders\">\r\n                        <h3>Order List</h3>\r\n                        {orders.length > 0 ? (\r\n                            <table className=\"orders-table\">\r\n                                <thead>\r\n                                    <tr>\r\n                                        <th>Order ID</th>\r\n                                        <th>Amount</th>\r\n                                        <th>Currency</th>\r\n                                        <th>Email</th>\r\n                                        <th>Address</th>\r\n                                        <th>Payment Status</th>\r\n                                        <th>Created At</th>\r\n                                        <th>Updated At</th>\r\n                                    </tr>\r\n                                </thead>\r\n                                <tbody>\r\n                                    {orders.map((order) => (\r\n                                        <tr key={order.id}>\r\n                                            <td>{order.id}</td>\r\n                                            <td>£{order.amount}</td>\r\n                                            <td>{order.currency}</td>\r\n                                            <td>{order.email}</td>\r\n                                            <td>{order.address}</td>\r\n                                            <td>{order.payment_status}</td>\r\n                                            <td>{new Date(order.created_at).toLocaleString()}</td>\r\n                                            <td>{new Date(order.updated_at).toLocaleString()}</td>\r\n                                        </tr>\r\n                                    ))}\r\n                                </tbody>\r\n                            </table>\r\n                        ) : (\r\n                            <p>No orders available.</p>\r\n                        )}\r\n                    </section>\r\n                )}\r\n                  {alertMessage && (\r\n                    <div className={`alert-popup ${fadeOut ? \"alert-popup-exit\" : \"\"}`}>\r\n                        {alertMessage}\r\n                    </div>\r\n                )}\r\n            </main>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default AdminDashboard;\r\n"],"names":["Spinner","_jsx","className","children","AdminDashboard","orders","setOrders","useState","alertMessage","setAlertMessage","products","setProducts","salesData","setSalesData","sales_count","total","total_buyer","loading","setLoading","activeMenu","setActiveMenu","productForm","setProductForm","id","name","price","image","isEditing","setIsEditing","chartRef","useRef","fadeOut","setFadeOut","navigate","useNavigate","isAddingProduct","setIsAddingProduct","useEffect","async","productsResponse","fetch","productsData","json","salesResponse","ordersResponse","ordersData","console","log","err","error","fetchData","current","destroy","ctx","document","getElementById","getContext","Chart","type","data","labels","datasets","label","borderColor","backgroundColor","tension","options","responsive","plugins","legend","position","handleInputChange","e","value","target","handleEditProduct","product","topSellingProducts","map","totalSales","reduce","acc","order","product_id","amount","sort","a","b","slice","orderSummary","payment_status","timer","setTimeout","clearTimeout","_jsxs","onClick","response","method","headers","credentials","ok","Error","message","alert","_Fragment","Object","entries","_ref","status","count","width","height","onSubmit","preventDefault","formData","FormData","append","key","axios","put","updatedProduct","prevProducts","post","placeholder","onChange","required","accept","file","files","prevState","img","src","alt","filter","handleDeleteProduct","length","currency","email","address","Date","created_at","toLocaleString","updated_at"],"sourceRoot":""}