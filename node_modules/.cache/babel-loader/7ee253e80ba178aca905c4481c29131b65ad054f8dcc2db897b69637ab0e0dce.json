{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import{FaTimes}from\"react-icons/fa\";import{useNavigate}from\"react-router-dom\";import CartItem from\"./cartitem\";import\"./cart.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function Cart(_ref){let{removeFromCart,cartRef}=_ref;const loadCart=()=>JSON.parse(sessionStorage.getItem(\"cart\"))||[];const[cart,setCart]=useState(loadCart());const[alertMessage,setAlertMessage]=useState(\"\");const[fadeOut,setFadeOut]=useState(false);const navigate=useNavigate();const updateCart=newCart=>{setCart(newCart);sessionStorage.setItem(\"cart\",JSON.stringify(newCart));};const handleCartClose=()=>{if(cartRef!==null&&cartRef!==void 0&&cartRef.current){cartRef.current.classList.remove(\"active\");}};const handleCheckout=()=>{// Directly navigate to checkout without a loading state\nnavigate(\"/checkout\",{state:{cart}});};const handleRemoveFromCart=product=>{removeFromCart(product);updateCart(cart.filter(item=>item.productId!==product.productId));setAlertMessage(`${product.productName} has been removed from your cart.`);};useEffect(()=>{if(alertMessage){const timer=setTimeout(()=>setFadeOut(true),5000);return()=>clearTimeout(timer);}},[alertMessage]);return/*#__PURE__*/_jsx(\"main\",{className:\"cart-main\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"cart-section\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"cart-section-text\",children:[/*#__PURE__*/_jsx(FaTimes,{className:\"times\",onClick:handleCartClose}),/*#__PURE__*/_jsx(\"h2\",{children:\"Shopping Cart\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"cart-list\",children:cart.length===0?/*#__PURE__*/_jsx(\"p\",{children:\"Your cart is empty\"}):cart.map((product,index)=>/*#__PURE__*/_jsx(CartItem,{product:product,index:index,onIncrease:()=>updateCart(cart.map((item,i)=>i===index?{...item,quantity:item.quantity+1}:item)),onDecrease:()=>updateCart(cart.map((item,i)=>i===index&&item.quantity>1?{...item,quantity:item.quantity-1}:item)),onRemove:handleRemoveFromCart},index))}),/*#__PURE__*/_jsxs(\"div\",{className:\"cart-total\",children:[/*#__PURE__*/_jsxs(\"h4\",{children:[\"Total: \\xA3\",cart.reduce((total,product)=>total+product.price*product.quantity,0).toFixed(2)]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleCheckout,children:\"Proceed to Checkout\"})]}),alertMessage&&/*#__PURE__*/_jsx(\"div\",{className:`alert-popup ${fadeOut?\"alert-popup-exit\":\"\"}`,children:alertMessage})]})});}","map":{"version":3,"names":["React","useState","useEffect","FaTimes","useNavigate","CartItem","jsx","_jsx","jsxs","_jsxs","Cart","_ref","removeFromCart","cartRef","loadCart","JSON","parse","sessionStorage","getItem","cart","setCart","alertMessage","setAlertMessage","fadeOut","setFadeOut","navigate","updateCart","newCart","setItem","stringify","handleCartClose","current","classList","remove","handleCheckout","state","handleRemoveFromCart","product","filter","item","productId","productName","timer","setTimeout","clearTimeout","className","children","onClick","length","map","index","onIncrease","i","quantity","onDecrease","onRemove","reduce","total","price","toFixed"],"sources":["/Users/touchbar/Documents/GitHub/medmore-website/src/component/cart/cart.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { FaTimes } from \"react-icons/fa\";\nimport { useNavigate } from \"react-router-dom\";\nimport CartItem from \"./cartitem\";\nimport \"./cart.css\";\n\nexport default function Cart({ removeFromCart, cartRef }) {\n    const loadCart = () => JSON.parse(sessionStorage.getItem(\"cart\")) || [];\n    const [cart, setCart] = useState(loadCart());\n    const [alertMessage, setAlertMessage] = useState(\"\");\n    const [fadeOut, setFadeOut] = useState(false);\n    const navigate = useNavigate();\n\n    const updateCart = (newCart) => {\n        setCart(newCart);\n        sessionStorage.setItem(\"cart\", JSON.stringify(newCart));\n    };\n\n    const handleCartClose = () => {\n        if (cartRef?.current) {\n            cartRef.current.classList.remove(\"active\");\n        }\n    };\n\n    const handleCheckout = () => {\n        // Directly navigate to checkout without a loading state\n        navigate(\"/checkout\", { state: { cart } });\n    };\n\n    const handleRemoveFromCart = (product) => {\n        removeFromCart(product);\n        updateCart(cart.filter((item) => item.productId !== product.productId));\n        setAlertMessage(`${product.productName} has been removed from your cart.`);\n    };\n\n    useEffect(() => {\n        if (alertMessage) {\n            const timer = setTimeout(() => setFadeOut(true), 5000);\n            return () => clearTimeout(timer);\n        }\n    }, [alertMessage]);\n\n    return (\n        <main className=\"cart-main\">\n            <div className=\"cart-section\">\n                <div className=\"cart-section-text\">\n                    <FaTimes className=\"times\" onClick={handleCartClose} />\n                    <h2>Shopping Cart</h2>\n                </div>\n                <div className=\"cart-list\">\n                    {cart.length === 0 ? (\n                        <p>Your cart is empty</p>\n                    ) : (\n                        cart.map((product, index) => (\n                            <CartItem\n                                key={index}\n                                product={product}\n                                index={index}\n                                onIncrease={() =>\n                                    updateCart(cart.map((item, i) =>\n                                        i === index\n                                            ? { ...item, quantity: item.quantity + 1 }\n                                            : item\n                                    ))\n                                }\n                                onDecrease={() =>\n                                    updateCart(cart.map((item, i) =>\n                                        i === index && item.quantity > 1\n                                            ? { ...item, quantity: item.quantity - 1 }\n                                            : item\n                                    ))\n                                }\n                                onRemove={handleRemoveFromCart}\n                            />\n                        ))\n                    )}\n                </div>\n                <div className=\"cart-total\">\n                    <h4>\n                        Total: Â£\n                        {cart.reduce((total, product) => total + product.price * product.quantity, 0).toFixed(2)}\n                    </h4>\n                    <button onClick={handleCheckout}>Proceed to Checkout</button>\n                </div>\n                {alertMessage && (\n                    <div className={`alert-popup ${fadeOut ? \"alert-popup-exit\" : \"\"}`}>\n                        {alertMessage}\n                    </div>\n                )}\n            </div>\n        </main>\n    );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}