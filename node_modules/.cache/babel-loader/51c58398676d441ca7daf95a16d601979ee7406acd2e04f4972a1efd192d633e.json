{"ast":null,"code":"import React,{useState,lazy,Suspense}from'react';import{BrowserRouter as Router,Route,Routes}from'react-router-dom';import{Elements}from'@stripe/react-stripe-js';import{loadStripe}from'@stripe/stripe-js';import'./App.css';import'bootstrap/dist/css/bootstrap.min.css';// Lazy load components\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Home=/*#__PURE__*/lazy(()=>import('./pages/home/home'));const Payment=/*#__PURE__*/lazy(()=>import('./pages/payment/payment'));const Detail=/*#__PURE__*/lazy(()=>import('./pages/details/detail'));const Card=/*#__PURE__*/lazy(()=>import('./pages/card/card'));const ProductDisplay=/*#__PURE__*/lazy(()=>import('./pages/productdisplay/display'));const Checkout=/*#__PURE__*/lazy(()=>import('./pages/checkout/checkout'));const AdminDashboard=/*#__PURE__*/lazy(()=>import('./pages/adminDashboard/admin'));const OrderConfirmation=/*#__PURE__*/lazy(()=>import('./pages/order/order'));const stripePromise=loadStripe(process.env.REACT_APP_STRIPE_PUBLIC_KEY);function App(){const[cart,setCart]=useState(()=>{const savedCart=sessionStorage.getItem(\"cart\");return savedCart?JSON.parse(savedCart):[];});const updateSessionStorageCart=newCart=>{if(newCart.length>0){sessionStorage.setItem(\"cart\",JSON.stringify(newCart));}else{sessionStorage.removeItem(\"cart\");}};const removeFromCart=async product=>{try{// Update local state first\nconst newCart=cart.filter(item=>item.id!==product.productId);setCart(newCart);updateSessionStorageCart(newCart);// Make API call\nconst response=await fetch(`${process.env.REACT_APP_API_URL}/cart`,{method:\"DELETE\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({userId:sessionStorage.getItem(\"user_id\"),productId:product.productId})});if(!response.ok){const errorMessage=await response.text();throw new Error(errorMessage||\"Failed to remove item from cart\");}// Get updated cart from server\nconst serverCart=await response.json();setCart(serverCart);updateSessionStorageCart(serverCart);}catch(error){console.error(\"Error removing item from server:\",error);// Revert to original cart if there's an error\nsetCart(cart);updateSessionStorageCart(cart);}};return/*#__PURE__*/_jsx(Elements,{stripe:stripePromise,children:/*#__PURE__*/_jsx(Router,{children:/*#__PURE__*/_jsx(Suspense,{fallback:/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"}),children:/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(Home,{removeFromCart:removeFromCart})}),/*#__PURE__*/_jsx(Route,{path:\"/checkout\",element:/*#__PURE__*/_jsx(Checkout,{removeFromCart:removeFromCart})}),/*#__PURE__*/_jsx(Route,{path:\"/admin\",element:/*#__PURE__*/_jsx(AdminDashboard,{})}),/*#__PURE__*/_jsx(Route,{path:\"/payment\",element:/*#__PURE__*/_jsx(Payment,{})}),/*#__PURE__*/_jsx(Route,{path:\"/card\",element:/*#__PURE__*/_jsx(Card,{})}),/*#__PURE__*/_jsx(Route,{path:\"/detail\",element:/*#__PURE__*/_jsx(Detail,{})}),/*#__PURE__*/_jsx(Route,{path:\"/display\",element:/*#__PURE__*/_jsx(ProductDisplay,{})}),/*#__PURE__*/_jsx(Route,{path:\"/order\",element:/*#__PURE__*/_jsx(OrderConfirmation,{})})]})})})});}export default App;","map":{"version":3,"names":["React","useState","lazy","Suspense","BrowserRouter","Router","Route","Routes","Elements","loadStripe","jsx","_jsx","jsxs","_jsxs","Home","Payment","Detail","Card","ProductDisplay","Checkout","AdminDashboard","OrderConfirmation","stripePromise","process","env","REACT_APP_STRIPE_PUBLIC_KEY","App","cart","setCart","savedCart","sessionStorage","getItem","JSON","parse","updateSessionStorageCart","newCart","length","setItem","stringify","removeItem","removeFromCart","product","filter","item","id","productId","response","fetch","REACT_APP_API_URL","method","headers","body","userId","ok","errorMessage","text","Error","serverCart","json","error","console","stripe","children","fallback","path","element"],"sources":["/Users/touchbar/Documents/GitHub/medmore-website/src/App.js"],"sourcesContent":["import React, { useState, lazy, Suspense } from 'react';\nimport { BrowserRouter as Router, Route, Routes } from 'react-router-dom';\nimport { Elements } from '@stripe/react-stripe-js';\nimport { loadStripe } from '@stripe/stripe-js';\nimport './App.css';\nimport 'bootstrap/dist/css/bootstrap.min.css';\n\n// Lazy load components\nconst Home = lazy(() => import('./pages/home/home'));\nconst Payment = lazy(() => import('./pages/payment/payment'));\nconst Detail = lazy(() => import('./pages/details/detail'));\nconst Card = lazy(() => import('./pages/card/card'));\nconst ProductDisplay = lazy(() => import('./pages/productdisplay/display'));\nconst Checkout = lazy(() => import('./pages/checkout/checkout'));\nconst AdminDashboard = lazy(() => import('./pages/adminDashboard/admin'));\nconst OrderConfirmation = lazy(() => import('./pages/order/order'));\n\nconst stripePromise = loadStripe(process.env.REACT_APP_STRIPE_PUBLIC_KEY);\n\nfunction App() {\n  const [cart, setCart] = useState(() => {\n    const savedCart = sessionStorage.getItem(\"cart\");\n    return savedCart ? JSON.parse(savedCart) : [];\n  });\n\n  const updateSessionStorageCart = (newCart) => {\n    if (newCart.length > 0) {\n      sessionStorage.setItem(\"cart\", JSON.stringify(newCart));\n    } else {\n      sessionStorage.removeItem(\"cart\");\n    }\n  };\n\n  const removeFromCart = async (product) => {\n    try {\n      // Update local state first\n      const newCart = cart.filter(item => item.id !== product.productId);\n      setCart(newCart);\n      updateSessionStorageCart(newCart);\n\n      // Make API call\n      const response = await fetch(`${process.env.REACT_APP_API_URL}/cart`, {\n        method: \"DELETE\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({\n          userId: sessionStorage.getItem(\"user_id\"),\n          productId: product.productId\n        }),\n      });\n\n      if (!response.ok) {\n        const errorMessage = await response.text();\n        throw new Error(errorMessage || \"Failed to remove item from cart\");\n      }\n\n      // Get updated cart from server\n      const serverCart = await response.json();\n      setCart(serverCart);\n      updateSessionStorageCart(serverCart);\n\n    } catch (error) {\n      console.error(\"Error removing item from server:\", error);\n      // Revert to original cart if there's an error\n      setCart(cart);\n      updateSessionStorageCart(cart);\n    }\n  };\n\n  return (\n    <Elements stripe={stripePromise}>\n      <Router>\n        <Suspense fallback={<div>Loading...</div>}>\n          <Routes>\n            <Route path=\"/\" element={<Home removeFromCart={removeFromCart} />} />\n            <Route path=\"/checkout\" element={<Checkout removeFromCart={removeFromCart} />} />\n            <Route path=\"/admin\" element={<AdminDashboard />} />\n            <Route path=\"/payment\" element={<Payment />} />\n            <Route path=\"/card\" element={<Card />} />\n            <Route path=\"/detail\" element={<Detail />} />\n            <Route path=\"/display\" element={<ProductDisplay />} />\n            <Route path=\"/order\" element={<OrderConfirmation />} />\n          </Routes>\n        </Suspense>\n      </Router>\n    </Elements>\n  );\n}\n\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}