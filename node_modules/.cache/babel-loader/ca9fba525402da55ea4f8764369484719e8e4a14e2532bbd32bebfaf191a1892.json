{"ast":null,"code":"import React,{useState,lazy,Suspense}from'react';import{BrowserRouter as Router,Route,Routes}from'react-router-dom';import{Elements}from'@stripe/react-stripe-js';import{loadStripe}from'@stripe/stripe-js';// Import CSS after component imports\nimport'./App.css';import'bootstrap/dist/css/bootstrap.min.css';// Lazy load components\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Home=/*#__PURE__*/lazy(()=>import('./pages/home/home'));const Payment=/*#__PURE__*/lazy(()=>import('./pages/payment/payment'));const Detail=/*#__PURE__*/lazy(()=>import('./pages/details/detail'));const Card=/*#__PURE__*/lazy(()=>import('./pages/card/card'));const ProductDisplay=/*#__PURE__*/lazy(()=>import('./pages/productdisplay/display'));const Checkout=/*#__PURE__*/lazy(()=>import('./pages/checkout/checkout'));const AdminDashboard=/*#__PURE__*/lazy(()=>import('./pages/adminDashboard/admin'));const OrderConfirmation=/*#__PURE__*/lazy(()=>import('./pages/order/order'));// Loading component\nconst LoadingFallback=()=>/*#__PURE__*/_jsx(\"div\",{className:\"loading-spinner\",children:\"Loading...\"});// Initialize Stripe outside component to prevent unnecessary re-initialization\nconst stripePromise=loadStripe(process.env.REACT_APP_STRIPE_PUBLIC_KEY);function App(){// Use custom hook for cart management\nconst[cart,setCart]=useCart();const removeFromCart=async product=>{try{const updatedCart=await handleRemoveFromCart(product,cart);setCart(updatedCart);}catch(error){console.error('Error removing item:',error);// Show error notification to user\n}};return/*#__PURE__*/_jsx(Elements,{stripe:stripePromise,children:/*#__PURE__*/_jsx(Router,{children:/*#__PURE__*/_jsx(Suspense,{fallback:/*#__PURE__*/_jsx(LoadingFallback,{}),children:/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(Home,{removeFromCart:removeFromCart})}),/*#__PURE__*/_jsx(Route,{path:\"/checkout\",element:/*#__PURE__*/_jsx(Checkout,{removeFromCart:removeFromCart})}),/*#__PURE__*/_jsx(Route,{path:\"/admin\",element:/*#__PURE__*/_jsx(AdminDashboard,{})}),/*#__PURE__*/_jsx(Route,{path:\"/payment\",element:/*#__PURE__*/_jsx(Payment,{})}),/*#__PURE__*/_jsx(Route,{path:\"/card\",element:/*#__PURE__*/_jsx(Card,{})}),/*#__PURE__*/_jsx(Route,{path:\"/detail\",element:/*#__PURE__*/_jsx(Detail,{})}),/*#__PURE__*/_jsx(Route,{path:\"/display\",element:/*#__PURE__*/_jsx(ProductDisplay,{})}),/*#__PURE__*/_jsx(Route,{path:\"/order\",element:/*#__PURE__*/_jsx(OrderConfirmation,{})})]})})})});}// Custom hook for cart management\nfunction useCart(){const[cart,setCart]=useState(()=>{const savedCart=sessionStorage.getItem('cart');return savedCart?JSON.parse(savedCart):[];});// Update session storage whenever cart changes\nReact.useEffect(()=>{if(cart.length>0){sessionStorage.setItem('cart',JSON.stringify(cart));}else{sessionStorage.removeItem('cart');}},[cart]);return[cart,setCart];}// Separate cart removal logic\nasync function handleRemoveFromCart(product,currentCart){const updatedCart=currentCart.filter(item=>item.id!==product.productId);try{const response=await fetch(`${process.env.REACT_APP_API_URL}/cart`,{method:'DELETE',headers:{'Content-Type':'application/json'// Add any authentication headers here\n},body:JSON.stringify({userId:sessionStorage.getItem('user_id'),productId:product.productId})});if(!response.ok){throw new Error((await response.text())||'Failed to remove item from cart');}const serverCart=await response.json();return serverCart;}catch(error){throw new Error(`Failed to remove item: ${error.message}`);}}export default App;","map":{"version":3,"names":["React","useState","lazy","Suspense","BrowserRouter","Router","Route","Routes","Elements","loadStripe","jsx","_jsx","jsxs","_jsxs","Home","Payment","Detail","Card","ProductDisplay","Checkout","AdminDashboard","OrderConfirmation","LoadingFallback","className","children","stripePromise","process","env","REACT_APP_STRIPE_PUBLIC_KEY","App","cart","setCart","useCart","removeFromCart","product","updatedCart","handleRemoveFromCart","error","console","stripe","fallback","path","element","savedCart","sessionStorage","getItem","JSON","parse","useEffect","length","setItem","stringify","removeItem","currentCart","filter","item","id","productId","response","fetch","REACT_APP_API_URL","method","headers","body","userId","ok","Error","text","serverCart","json","message"],"sources":["/Users/touchbar/Documents/GitHub/medmore-website/src/App.js"],"sourcesContent":["import React, { useState, lazy, Suspense } from 'react';\nimport { BrowserRouter as Router, Route, Routes } from 'react-router-dom';\nimport { Elements } from '@stripe/react-stripe-js';\nimport { loadStripe } from '@stripe/stripe-js';\n\n// Import CSS after component imports\nimport './App.css';\nimport 'bootstrap/dist/css/bootstrap.min.css';\n\n// Lazy load components\nconst Home = lazy(() => import('./pages/home/home'));\nconst Payment = lazy(() => import('./pages/payment/payment'));\nconst Detail = lazy(() => import('./pages/details/detail'));\nconst Card = lazy(() => import('./pages/card/card'));\nconst ProductDisplay = lazy(() => import('./pages/productdisplay/display'));\nconst Checkout = lazy(() => import('./pages/checkout/checkout'));\nconst AdminDashboard = lazy(() => import('./pages/adminDashboard/admin'));\nconst OrderConfirmation = lazy(() => import('./pages/order/order'));\n\n// Loading component\nconst LoadingFallback = () => (\n  <div className=\"loading-spinner\">\n    Loading...\n  </div>\n);\n\n// Initialize Stripe outside component to prevent unnecessary re-initialization\nconst stripePromise = loadStripe(process.env.REACT_APP_STRIPE_PUBLIC_KEY);\n\nfunction App() {\n  // Use custom hook for cart management\n  const [cart, setCart] = useCart();\n\n  const removeFromCart = async (product) => {\n    try {\n      const updatedCart = await handleRemoveFromCart(product, cart);\n      setCart(updatedCart);\n    } catch (error) {\n      console.error('Error removing item:', error);\n      // Show error notification to user\n    }\n  };\n\n  return (\n    <Elements stripe={stripePromise}>\n      <Router>\n        <Suspense fallback={<LoadingFallback />}>\n          <Routes>\n            <Route \n              path=\"/\" \n              element={<Home removeFromCart={removeFromCart} />} \n            />\n            <Route \n              path=\"/checkout\" \n              element={<Checkout removeFromCart={removeFromCart} />} \n            />\n            <Route \n              path=\"/admin\" \n              element={<AdminDashboard />} \n            />\n            <Route \n              path=\"/payment\" \n              element={<Payment />} \n            />\n            <Route \n              path=\"/card\" \n              element={<Card />} \n            />\n            <Route \n              path=\"/detail\" \n              element={<Detail />} \n            />\n            <Route \n              path=\"/display\" \n              element={<ProductDisplay />} \n            />\n            <Route \n              path=\"/order\" \n              element={<OrderConfirmation />} \n            />\n          </Routes>\n        </Suspense>\n      </Router>\n    </Elements>\n  );\n}\n\n// Custom hook for cart management\nfunction useCart() {\n  const [cart, setCart] = useState(() => {\n    const savedCart = sessionStorage.getItem('cart');\n    return savedCart ? JSON.parse(savedCart) : [];\n  });\n\n  // Update session storage whenever cart changes\n  React.useEffect(() => {\n    if (cart.length > 0) {\n      sessionStorage.setItem('cart', JSON.stringify(cart));\n    } else {\n      sessionStorage.removeItem('cart');\n    }\n  }, [cart]);\n\n  return [cart, setCart];\n}\n\n// Separate cart removal logic\nasync function handleRemoveFromCart(product, currentCart) {\n  const updatedCart = currentCart.filter(item => item.id !== product.productId);\n\n  try {\n    const response = await fetch(`${process.env.REACT_APP_API_URL}/cart`, {\n      method: 'DELETE',\n      headers: { \n        'Content-Type': 'application/json',\n        // Add any authentication headers here\n      },\n      body: JSON.stringify({ \n        userId: sessionStorage.getItem('user_id'), \n        productId: product.productId \n      }),\n    });\n\n    if (!response.ok) {\n      throw new Error(await response.text() || 'Failed to remove item from cart');\n    }\n\n    const serverCart = await response.json();\n    return serverCart;\n  } catch (error) {\n    throw new Error(`Failed to remove item: ${error.message}`);\n  }\n}\n\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}