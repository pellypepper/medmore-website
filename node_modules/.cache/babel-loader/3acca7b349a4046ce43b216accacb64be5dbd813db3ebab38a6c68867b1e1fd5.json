{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import{useNavigate}from\"react-router-dom\";import Spinner from\"../spinner\";// Adjust the path according to your project structure\nimport\"./product.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ProductCard=_ref=>{let{product,addToCart}=_ref;const[quantity,setQuantity]=useState(1);const[alertMessage,setAlertMessage]=useState(\"\");const[fadeOut,setFadeOut]=useState(false);const[loading,setLoading]=useState(false);const navigate=useNavigate();const updateQuantity=delta=>setQuantity(prev=>Math.max(1,prev+delta));const handleProductDisplay=e=>{e.preventDefault();navigate(\"/display\",{state:{product}});};const handleSubmit=async e=>{e.preventDefault();setLoading(true);try{addToCart(product,quantity);setAlertMessage(`${quantity} ${product.name} added to cart.`);// await new Promise((resolve) => setTimeout(resolve, 100));\n}catch(error){console.error('Failed to add to cart:',error);setAlertMessage('Failed to add product to cart.');}finally{setLoading(false);}};useEffect(()=>{if(alertMessage){const timer=setTimeout(()=>setFadeOut(true),5000);return()=>clearTimeout(timer);}},[alertMessage]);//  const imageUrl = product.img\nreturn/*#__PURE__*/_jsxs(\"div\",{className:\" card\",children:[loading&&/*#__PURE__*/_jsx(Spinner,{}),/*#__PURE__*/_jsx(\"img\",{loading:\"lazy\",onClick:handleProductDisplay,src:product.img,className:\"card-img rounded-0\",alt:product.name,role:\"button\",\"aria-label\":`View details of ${product.name}`}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"card-title\",children:product.name}),/*#__PURE__*/_jsxs(\"p\",{children:[\"\\xA3\",product.price]}),/*#__PURE__*/_jsxs(\"form\",{className:\"product-form\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"quantity-controls\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>updateQuantity(-1),children:\"-\"}),/*#__PURE__*/_jsx(\"span\",{children:quantity}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>updateQuantity(1),children:\"+\"})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:loading,children:loading?\"Adding...\":\"Add to Cart\"})]}),alertMessage&&/*#__PURE__*/_jsx(\"div\",{className:`alert-popup ${fadeOut?\"alert-popup-exit\":\"\"}`,children:alertMessage})]})]});};export default ProductCard;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","Spinner","jsx","_jsx","jsxs","_jsxs","ProductCard","_ref","product","addToCart","quantity","setQuantity","alertMessage","setAlertMessage","fadeOut","setFadeOut","loading","setLoading","navigate","updateQuantity","delta","prev","Math","max","handleProductDisplay","e","preventDefault","state","handleSubmit","name","error","console","timer","setTimeout","clearTimeout","className","children","onClick","src","img","alt","role","price","onSubmit","type","disabled"],"sources":["C:/Users/ppeli/OneDrive/Documents/GitHub/medmore-website/src/component/product/productcard.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport Spinner from \"../spinner\"; // Adjust the path according to your project structure\r\nimport \"./product.css\";\r\n\r\nconst ProductCard = ({ product, addToCart }) => {\r\n    const [quantity, setQuantity] = useState(1);\r\n    const [alertMessage, setAlertMessage] = useState(\"\");\r\n    const [fadeOut, setFadeOut] = useState(false);\r\n    const [loading, setLoading] = useState(false);\r\n\r\n    const navigate = useNavigate();\r\n\r\n    const updateQuantity = (delta) => setQuantity((prev) => Math.max(1, prev + delta));\r\n\r\n    const handleProductDisplay = (e) => {\r\n        e.preventDefault();\r\n        navigate(\"/display\", { state: { product } });\r\n    };\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n        setLoading(true);\r\n\r\n        try {\r\n        \r\n         \r\n            addToCart(product, quantity);\r\n            setAlertMessage(`${quantity} ${product.name} added to cart.`);\r\n            // await new Promise((resolve) => setTimeout(resolve, 100));\r\n        } catch (error) {\r\n            console.error('Failed to add to cart:', error);\r\n            setAlertMessage('Failed to add product to cart.');\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        if (alertMessage) {\r\n            const timer = setTimeout(() => setFadeOut(true), 5000);\r\n            return () => clearTimeout(timer);\r\n        }\r\n    }, [alertMessage]);\r\n \r\n\r\n   \r\n\r\n//  const imageUrl = product.img\r\n\r\n\r\n    return (\r\n        <div className=\" card\">\r\n            {loading && <Spinner />}\r\n            <img\r\n            loading=\"lazy\"\r\n                onClick={handleProductDisplay}\r\n                src={product.img}\r\n                className=\"card-img rounded-0\"\r\n                alt={product.name}\r\n                role=\"button\"\r\n                aria-label={`View details of ${product.name}`}\r\n    \r\n               \r\n            />\r\n            <div className=\"card-body\">\r\n                <p className=\"card-title\">{product.name}</p>\r\n                <p>Â£{product.price}</p>\r\n                <form className=\"product-form\" onSubmit={handleSubmit}>\r\n                    <div className=\"quantity-controls\">\r\n                        <button type=\"button\" onClick={() => updateQuantity(-1)}>-</button>\r\n                        <span>{quantity}</span>\r\n                        <button type=\"button\" onClick={() => updateQuantity(1)}>+</button>\r\n                    </div>\r\n                    <button type=\"submit\" disabled={loading}>\r\n                        {loading ? \"Adding...\" : \"Add to Cart\"}\r\n                    </button>\r\n                </form>\r\n                {alertMessage && (\r\n                    <div className={`alert-popup ${fadeOut ? \"alert-popup-exit\" : \"\"}`}>\r\n                        {alertMessage}\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ProductCard;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,OAASC,WAAW,KAAQ,kBAAkB,CAC9C,MAAO,CAAAC,OAAO,KAAM,YAAY,CAAE;AAClC,MAAO,eAAe,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEvB,KAAM,CAAAC,WAAW,CAAGC,IAAA,EAA4B,IAA3B,CAAEC,OAAO,CAAEC,SAAU,CAAC,CAAAF,IAAA,CACvC,KAAM,CAACG,QAAQ,CAAEC,WAAW,CAAC,CAAGb,QAAQ,CAAC,CAAC,CAAC,CAC3C,KAAM,CAACc,YAAY,CAAEC,eAAe,CAAC,CAAGf,QAAQ,CAAC,EAAE,CAAC,CACpD,KAAM,CAACgB,OAAO,CAAEC,UAAU,CAAC,CAAGjB,QAAQ,CAAC,KAAK,CAAC,CAC7C,KAAM,CAACkB,OAAO,CAAEC,UAAU,CAAC,CAAGnB,QAAQ,CAAC,KAAK,CAAC,CAE7C,KAAM,CAAAoB,QAAQ,CAAGlB,WAAW,CAAC,CAAC,CAE9B,KAAM,CAAAmB,cAAc,CAAIC,KAAK,EAAKT,WAAW,CAAEU,IAAI,EAAKC,IAAI,CAACC,GAAG,CAAC,CAAC,CAAEF,IAAI,CAAGD,KAAK,CAAC,CAAC,CAElF,KAAM,CAAAI,oBAAoB,CAAIC,CAAC,EAAK,CAChCA,CAAC,CAACC,cAAc,CAAC,CAAC,CAClBR,QAAQ,CAAC,UAAU,CAAE,CAAES,KAAK,CAAE,CAAEnB,OAAQ,CAAE,CAAC,CAAC,CAChD,CAAC,CAED,KAAM,CAAAoB,YAAY,CAAG,KAAO,CAAAH,CAAC,EAAK,CAC9BA,CAAC,CAACC,cAAc,CAAC,CAAC,CAClBT,UAAU,CAAC,IAAI,CAAC,CAEhB,GAAI,CAGAR,SAAS,CAACD,OAAO,CAAEE,QAAQ,CAAC,CAC5BG,eAAe,CAAC,GAAGH,QAAQ,IAAIF,OAAO,CAACqB,IAAI,iBAAiB,CAAC,CAC7D;AACJ,CAAE,MAAOC,KAAK,CAAE,CACZC,OAAO,CAACD,KAAK,CAAC,wBAAwB,CAAEA,KAAK,CAAC,CAC9CjB,eAAe,CAAC,gCAAgC,CAAC,CACrD,CAAC,OAAS,CACNI,UAAU,CAAC,KAAK,CAAC,CACrB,CACJ,CAAC,CAEDlB,SAAS,CAAC,IAAM,CACZ,GAAIa,YAAY,CAAE,CACd,KAAM,CAAAoB,KAAK,CAAGC,UAAU,CAAC,IAAMlB,UAAU,CAAC,IAAI,CAAC,CAAE,IAAI,CAAC,CACtD,MAAO,IAAMmB,YAAY,CAACF,KAAK,CAAC,CACpC,CACJ,CAAC,CAAE,CAACpB,YAAY,CAAC,CAAC,CAKtB;AAGI,mBACIP,KAAA,QAAK8B,SAAS,CAAC,OAAO,CAAAC,QAAA,EACjBpB,OAAO,eAAIb,IAAA,CAACF,OAAO,GAAE,CAAC,cACvBE,IAAA,QACAa,OAAO,CAAC,MAAM,CACVqB,OAAO,CAAEb,oBAAqB,CAC9Bc,GAAG,CAAE9B,OAAO,CAAC+B,GAAI,CACjBJ,SAAS,CAAC,oBAAoB,CAC9BK,GAAG,CAAEhC,OAAO,CAACqB,IAAK,CAClBY,IAAI,CAAC,QAAQ,CACb,aAAY,mBAAmBjC,OAAO,CAACqB,IAAI,EAAG,CAGjD,CAAC,cACFxB,KAAA,QAAK8B,SAAS,CAAC,WAAW,CAAAC,QAAA,eACtBjC,IAAA,MAAGgC,SAAS,CAAC,YAAY,CAAAC,QAAA,CAAE5B,OAAO,CAACqB,IAAI,CAAI,CAAC,cAC5CxB,KAAA,MAAA+B,QAAA,EAAG,MAAC,CAAC5B,OAAO,CAACkC,KAAK,EAAI,CAAC,cACvBrC,KAAA,SAAM8B,SAAS,CAAC,cAAc,CAACQ,QAAQ,CAAEf,YAAa,CAAAQ,QAAA,eAClD/B,KAAA,QAAK8B,SAAS,CAAC,mBAAmB,CAAAC,QAAA,eAC9BjC,IAAA,WAAQyC,IAAI,CAAC,QAAQ,CAACP,OAAO,CAAEA,CAAA,GAAMlB,cAAc,CAAC,CAAC,CAAC,CAAE,CAAAiB,QAAA,CAAC,GAAC,CAAQ,CAAC,cACnEjC,IAAA,SAAAiC,QAAA,CAAO1B,QAAQ,CAAO,CAAC,cACvBP,IAAA,WAAQyC,IAAI,CAAC,QAAQ,CAACP,OAAO,CAAEA,CAAA,GAAMlB,cAAc,CAAC,CAAC,CAAE,CAAAiB,QAAA,CAAC,GAAC,CAAQ,CAAC,EACjE,CAAC,cACNjC,IAAA,WAAQyC,IAAI,CAAC,QAAQ,CAACC,QAAQ,CAAE7B,OAAQ,CAAAoB,QAAA,CACnCpB,OAAO,CAAG,WAAW,CAAG,aAAa,CAClC,CAAC,EACP,CAAC,CACNJ,YAAY,eACTT,IAAA,QAAKgC,SAAS,CAAE,eAAerB,OAAO,CAAG,kBAAkB,CAAG,EAAE,EAAG,CAAAsB,QAAA,CAC9DxB,YAAY,CACZ,CACR,EACA,CAAC,EACL,CAAC,CAEd,CAAC,CAED,cAAe,CAAAN,WAAW","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}